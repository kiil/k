<!DOCTYPE html>
<html lang='da' class=''>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name=viewport content="width=device-width, initial-scale=1">



<meta name="description" content="Familien Kiil" />



<title>
	Kiils
	 - Smarte søgefunktioner i Recoll 
</title>



<link rel="icon" href="/favicon.ico">

	
















<script src="https://www.kiils.dk/js/pico.min.f68158e607f7493b08ceb09d0d24efe0.js" intergrity="md5-9oFY5gf3STsIzrCdDSTv4A==" crossorigin="anonymous"></script>


	





<link rel="stylesheet" href="https://www.kiils.dk/css/main.min.f7d31dbaede936cdbc9c2e57ee18dfbe.css" crossorigin="anonymous" media="screen"
	integrity="md5-99Mduu3pNs28nC5X7hjfvg==">




<link rel="stylesheet" href="https://www.kiils.dk/css/syntax.min.560c6a0b6dbbe4a6683a2312fd91b499.css" crossorigin="anonymous"
	integrity="md5-VgxqC2275KZoOiMS/ZG0mQ==" media="screen">








<link rel="stylesheet" href="https://www.kiils.dk/style/style.min.d41d8cd98f00b204e9800998ecf8427e.css" crossorigin="anonymous" media="screen"
	integrity="md5-1B2M2Y8AsgTpgAmY7PhCfg==">










<link rel="stylesheet" href="https://www.kiils.dk/css/main.min.1b6695ede8a03de873124c10b957342b.css" crossorigin="anonymous" media="screen"
	integrity="md5-G2aV7eigPehzEkwQuVc0Kw==">


</head>

<body class="min-h-screen bg-secondary-light dark:bg-secondary text-primary relative pb-24">
	
	<div id="top" class="dark"></div>

<header class="w-full flex items-center justify-between px-5 mx-auto md:pt-8 md:max-w-5xl pt-5">
	
	<div class="flex items-center">
		<a href="https://www.kiils.dk/" class="inline-block mx-1 font-bold no-underline select-none">
			<h1 class="hidden md:block font-charter tracking-normal m-0">
				Kiils
			</h1>

			<div class="md:hidden">
				<div class="w-8 h-8 relative font-bold bg-white blend-diff">
	<h1 class="absolute-center m-0 font-charter text-2xl text-gray-100 blend-diff select-none">
		K
	</h1>
</div>

			</div>
		</a>
		
	</div>

	<nav class="">
		
		<a href="/"
			class='mx-1 md:mx-2 hover:text-primary-light dark:hover:text-primary-dark no-underline'>
			 
		</a>
		
		<a href="/kursus/"
			class='mx-1 md:mx-2 hover:text-primary-light dark:hover:text-primary-dark no-underline'>
			 
		</a>
		
		<a href="/"
			class='mx-1 md:mx-2 hover:text-primary-light dark:hover:text-primary-dark no-underline'>
			 Hjem
		</a>
		
		<a href="/blog/"
			class='mx-1 md:mx-2 hover:text-primary-light dark:hover:text-primary-dark no-underline'>
			 Blog
		</a>
		
		<a href="/kontakt/"
			class='mx-1 md:mx-2 hover:text-primary-light dark:hover:text-primary-dark no-underline'>
			 
		</a>
		
		<a href="/kunde/"
			class='mx-1 md:mx-2 hover:text-primary-light dark:hover:text-primary-dark no-underline'>
			 
		</a>
		
		<a href="/priser/"
			class='mx-1 md:mx-2 hover:text-primary-light dark:hover:text-primary-dark no-underline'>
			 
		</a>
		
		<a href="/privacy/"
			class='mx-1 md:mx-2 hover:text-primary-light dark:hover:text-primary-dark no-underline'>
			 
		</a>
		
	</nav>
</header>

	

	<main class="w-full px-4 pt-8 mx-auto md:max-w-4xl overflow-x-hidden md:overflow-visible ">
<button onclick="window.history.back()" class="bg-transparent border-none font-bold">&larr;Tilbage</button>
<h1 class="blog-title text-center mx-auto max-w-vw-5/6 text-4xl sm:text-5xl md:text-6xl">
	Smarte søgefunktioner i Recoll
</h1>

<div class="blog-content text-justify leading-loose mb-12 mx-auto sm:max-w-vw-5/6 text-md">
	<p>Noget af det jeg manglede i MacOS Spotlight søgemaskinen, var en mere omfattende syntaks for søgning.</p>
<p>Recoll er både smart og omfangsrig på det område.</p>
<h2 id="stemming">Stemming</h2>
<p>Recoll er bygget på Xapian som faktisk har en dansk stemming-mekanisme.</p>
<p>Stemming finder roden af et ord og de forskellige afledninger. På den måde får man flere resultater på en søgning, og nogle af dem vil være relevante nok.</p>
<p>Med Recoll og Xapian tages der endda konkret højde for nøjagtig de ord som findes i dit indeks.</p>
<p>I mine tekster er der skrevet noget om biler en del gange:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&gt; recollq -s danish bilerne | count
</span></span><span class="line"><span class="cl">167
</span></span></code></pre></div><p>Med <code>-s danish</code> søger Recoll på &lsquo;bil&rsquo; og alle andre former af ordet, selvom det er indtastet som &lsquo;bilerne&rsquo;.</p>
<p>Men hvad nu hvis man kun vil søge på en bestemt form af et ord? Altså for eksempel &lsquo;bilerne&rsquo; nøjagtig sådan.</p>
<p>Stort forbogstav slår ganske enkelt stemmning fra:</p>
<p>Så <code>Bilerne</code> kun søger på &lsquo;bilerne&rsquo;, mens <code>bilerne</code> søger på &lsquo;bilerne&rsquo;, &lsquo;biler&rsquo;, &lsquo;bil&rsquo; etc.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&gt; recollq -s danish Bilerne | count
</span></span><span class="line"><span class="cl">4
</span></span></code></pre></div><p>Så jeg har altså kun fire tekster i mit arkiv hvor præcist bil indgår i <em>bestemt flertal</em>.</p>
<p>Stemming er heller ikke slået til når man søger en frase som for eksempel <code>&quot;bilerne er&quot;</code> da fraser jo er bogstavelige.</p>
<h2 id="nærhed-proximity">Nærhed (proximity)</h2>
<p>Recoll tager automatisk højde for nærhed når søgeresultater sorteres. Men en bestemt rækkefølge og et bestemt maksimalt antal ord kan også efterspørges.</p>
<p>Søgning efter &lsquo;dansk&rsquo; eller &lsquo;politik&rsquo; med dansk stemming:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&gt; recollq -s danish &#39;dansk politik&#39; | count
</span></span><span class="line"><span class="cl">507
</span></span></code></pre></div><p>Uden stemming</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&gt; recollq &#39;dansk politik&#39; | count
</span></span><span class="line"><span class="cl">110
</span></span></code></pre></div><p>Så snart man søger på en frase, gør stemming ingen forskel:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&gt; recollq -s danish &#39;&#34;dansk politik&#34;&#39; | count
</span></span><span class="line"><span class="cl">53
</span></span></code></pre></div><p>og</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&gt; recollq &#39;&#34;dansk politik&#34;&#39; | count
</span></span><span class="line"><span class="cl">53
</span></span></code></pre></div><p>er ækvivalente.</p>
<p>Accepterer man op til 5 ord imellem &lsquo;dansk&rsquo; og &lsquo;politik&rsquo;, men stadig samme rækkefølge af søgeord, kan det udtrykkes således:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&gt; recollq &#39;&#34;dansk politik&#34;o5&#39; | count
</span></span><span class="line"><span class="cl">57
</span></span></code></pre></div><p>Og med maksimalt fem ord mellem søgeordene hvor <em>rækkefølgen</em> er ligegyldig, stiger antal søgeresultater i det her tilfælde yderligere en smule:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&gt; recollq &#39;&#34;dansk politik&#34;p5&#39; | count
</span></span><span class="line"><span class="cl">61
</span></span></code></pre></div><h2 id="vægt-og-prioritet">Vægt og prioritet</h2>
<p>Normalt tæller antal gange, et søgeord optræder i en tekst, meget for relevansen, og man kan kunstigt oprioritere et bestemt ord ud af flere i en søgning.</p>
<p>Hvis et søgeord i en forespørgsel er ekstra vigtigt, kan det gives en højere vægt.</p>
<p>For eksempel giver</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&gt; recollq -n 1 &#39;&#34;dansk&#34;10 politik&#39;
</span></span><span class="line"><span class="cl">Recoll query: Query((5 * dansk AND politik))
</span></span><span class="line"><span class="cl">[file:///home/lk/TEKST/ARKIV/undertrykt-stakke-revolution-dansk-politik.da.md]
</span></span></code></pre></div><p>mens</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&gt; recollq -n 1 &#39;dansk &#34;politik&#34;10&#39;
</span></span><span class="line"><span class="cl">Recoll query: Query((dansk AND 10 * politik))
</span></span><span class="line"><span class="cl">[file:///home/lk/TEKST/ARKIV/BACKUP/Folkets Avis/Indhold/Ledere/Et vendepunkt i dansk politik.txt]	
</span></span></code></pre></div><p>Altså to forskellige resultater i mine tekster hvor sidste resultat er en tekst hvor &lsquo;politik&rsquo; fylder mere end i første.</p>
<p>Et helt tredje resultat får jeg ved</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">recollq -n 1 &#39;dansk -politik&#39;
</span></span></code></pre></div><p>for her er alle tekster med ordet &lsquo;politik&rsquo; i helt sorteret fra.</p>
<p>Det var nogen af mulighederne som gør det nemmere at finde relevante tekster og brudstykker af tekster frem i et stort lokalt arkiv.</p>

</div>


<hr class="mb-6 mt-24">


<div class="flex flex-wrap justify-between items-center">
	
	<div class=" w-full sm:w-1/2  mb-1 text-center sm:text-left overflow-ellipsis pr-1">
		<a class="mr-4 no-underline" href="https://www.kiils.dk/blog/recoll-fritekst-s%C3%B8gning/">
			<img src="/icons/top_arrow.svg" class="transform -rotate-90 inline-block">
		</a>
		<a href="https://www.kiils.dk/blog/recoll-fritekst-s%C3%B8gning/">
			<span class="underline">Sådan holder man styr på 10.000 tekster</span>
		</a>
	</div>
	

	
	<div
		class=" w-full sm:w-1/2  mt-1 text-center sm:text-right overflow-ellipsis pl-1">
		<a href="https://www.kiils.dk/blog/2022-06-08t123345/">
			<span class="underline">Bruge hugo server på lokalt netværk</span>
		</a>
		<a class="ml-4 no-underline" href="https://www.kiils.dk/blog/2022-06-08t123345/">
			<img src="/icons/top_arrow.svg" class="transform rotate-90 inline-block">
		</a>
	</div>
	
</div>

<hr class="my-6">
<div class="flex justify-center items-center flex-wrap">
	
</div>
<div class="mt-6"></div>


	</main>

	<div class="absolute bottom-0 w-full"><footer class="w-full h-24 text-center text-xs text-gray-400 bg-black relative">
	<div class="w-full px-6 md:pt-0 md:mx-auto md:max-w-5xl flex flex-1 space-between items-center absolute-center">
		<a href="https://www.kiils.dk/" class="absolute">
			<div class="w-8 h-8 relative font-bold bg-white blend-diff">
	<h1 class="absolute-center m-0 font-charter text-2xl text-gray-100 blend-diff select-none">
		K
	</h1>
</div>

		</a>

		<div class="h-full flex-1">
			<span class="select-none">
			</span>
		</div>
	</div>
</footer>

	</div>
</body>

</html>